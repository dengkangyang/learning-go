package main

import (
	"fmt"
	"html"
	"log"
	"net/http"

	"github.com/d4l3k/go-pry/pry"
)

func main() {
	w := 6
	http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
		b := "toast"
		pry.Apply(&pry.Scope{Vals:map[string]interface{}{ "main": main, "w": w, "r": r, "b": b, "fmt": pry.Package{Name: "fmt", Functions: map[string]interface{}{"Printf": fmt.Printf,"Fprintln": fmt.Fprintln,"Sprint": fmt.Sprint,"Fprint": fmt.Fprint,"Fprintf": fmt.Fprintf,"Errorf": fmt.Errorf,"Sprintln": fmt.Sprintln,"Println": fmt.Println,"Print": fmt.Print,"Sprintf": fmt.Sprintf,"Sscanln": fmt.Sscanln,"Sscan": fmt.Sscan,"Fscanln": fmt.Fscanln,"Scanln": fmt.Scanln,"Fscan": fmt.Fscan,"Scan": fmt.Scan,"Sscanf": fmt.Sscanf,"Scanf": fmt.Scanf,"Fscanf": fmt.Fscanf,}}, "html": pry.Package{Name: "html", Functions: map[string]interface{}{"EscapeString": html.EscapeString,"UnescapeString": html.UnescapeString,}}, "log": pry.Package{Name: "log", Functions: map[string]interface{}{"Fatal": log.Fatal,"Panic": log.Panic,"Panicf": log.Panicf,"Ltime": log.Ltime,"Llongfile": log.Llongfile,"New": log.New,"SetOutput": log.SetOutput,"SetPrefix": log.SetPrefix,"Fatalln": log.Fatalln,"Output": log.Output,"Ldate": log.Ldate,"LUTC": log.LUTC,"LstdFlags": log.LstdFlags,"Flags": log.Flags,"SetFlags": log.SetFlags,"Printf": log.Printf,"Fatalf": log.Fatalf,"Println": log.Println,"Panicln": log.Panicln,"Lmicroseconds": log.Lmicroseconds,"Lshortfile": log.Lshortfile,"Logger": pry.Type(log.Logger{}),"Prefix": log.Prefix,"Print": log.Print,}}, "http": pry.Package{Name: "http", Functions: map[string]interface{}{"PushOptions": pry.Type(http.PushOptions{}),"NoBody": http.NoBody,"ErrBodyReadAfterClose": http.ErrBodyReadAfterClose,"ErrLineTooLong": http.ErrLineTooLong,"DetectContentType": http.DetectContentType,"ProxyFromEnvironment": http.ProxyFromEnvironment,"Transport": pry.Type(http.Transport{}),"ErrSkipAltProtocol": http.ErrSkipAltProtocol,"DefaultTransport": http.DefaultTransport,"DefaultMaxIdleConnsPerHost": http.DefaultMaxIdleConnsPerHost,"ProxyURL": http.ProxyURL,"ParseTime": http.ParseTime,"CanonicalHeaderKey": http.CanonicalHeaderKey,"Header": pry.Type(http.Header(map[string][]string(nil))),"ErrMissingBoundary": http.ErrMissingBoundary,"ErrMissingFile": http.ErrMissingFile,"ErrUnexpectedTrailer": http.ErrUnexpectedTrailer,"ErrNoCookie": http.ErrNoCookie,"NewRequest": http.NewRequest,"ErrHeaderTooLong": http.ErrHeaderTooLong,"ErrMissingContentLength": http.ErrMissingContentLength,"MaxBytesReader": http.MaxBytesReader,"ProtocolError": pry.Type(http.ProtocolError{}),"ErrNotSupported": http.ErrNotSupported,"ParseHTTPVersion": http.ParseHTTPVersion,"ErrNotMultipart": http.ErrNotMultipart,"ErrShortBody": http.ErrShortBody,"Request": pry.Type(http.Request{}),"ReadRequest": http.ReadRequest,"ServeContent": http.ServeContent,"FileServer": http.FileServer,"ServeFile": http.ServeFile,"Dir": pry.Type(http.Dir("")),"SameSiteDefaultMode": http.SameSiteDefaultMode,"SameSiteStrictMode": http.SameSiteStrictMode,"SetCookie": http.SetCookie,"SameSiteLaxMode": http.SameSiteLaxMode,"Cookie": pry.Type(http.Cookie{}),"SameSite": pry.Type(http.SameSite(0)),"StateHijacked": http.StateHijacked,"NewServeMux": http.NewServeMux,"ServerContextKey": http.ServerContextKey,"NotFoundHandler": http.NotFoundHandler,"HandleFunc": http.HandleFunc,"Server": pry.Type(http.Server{}),"RedirectHandler": http.RedirectHandler,"NotFound": http.NotFound,"DefaultServeMux": http.DefaultServeMux,"ErrServerClosed": http.ErrServerClosed,"Serve": http.Serve,"StateNew": http.StateNew,"ErrHandlerTimeout": http.ErrHandlerTimeout,"Redirect": http.Redirect,"ErrBodyNotAllowed": http.ErrBodyNotAllowed,"TimeoutHandler": http.TimeoutHandler,"ListenAndServe": http.ListenAndServe,"ErrContentLength": http.ErrContentLength,"StateClosed": http.StateClosed,"ErrWriteAfterFlush": http.ErrWriteAfterFlush,"Error": http.Error,"ErrHijacked": http.ErrHijacked,"StateIdle": http.StateIdle,"TrailerPrefix": http.TrailerPrefix,"Handle": http.Handle,"ErrAbortHandler": http.ErrAbortHandler,"StripPrefix": http.StripPrefix,"StateActive": http.StateActive,"ListenAndServeTLS": http.ListenAndServeTLS,"LocalAddrContextKey": http.LocalAddrContextKey,"TimeFormat": http.TimeFormat,"ServeTLS": http.ServeTLS,"ConnState": pry.Type(http.ConnState(0)),"ServeMux": pry.Type(http.ServeMux{}),"DefaultMaxHeaderBytes": http.DefaultMaxHeaderBytes,"MethodPost": http.MethodPost,"MethodPut": http.MethodPut,"MethodPatch": http.MethodPatch,"MethodDelete": http.MethodDelete,"MethodOptions": http.MethodOptions,"MethodGet": http.MethodGet,"MethodHead": http.MethodHead,"MethodConnect": http.MethodConnect,"MethodTrace": http.MethodTrace,"StatusNotModified": http.StatusNotModified,"StatusConflict": http.StatusConflict,"StatusInsufficientStorage": http.StatusInsufficientStorage,"StatusFailedDependency": http.StatusFailedDependency,"StatusServiceUnavailable": http.StatusServiceUnavailable,"StatusProcessing": http.StatusProcessing,"StatusOK": http.StatusOK,"StatusPartialContent": http.StatusPartialContent,"StatusUnavailableForLegalReasons": http.StatusUnavailableForLegalReasons,"StatusInternalServerError": http.StatusInternalServerError,"StatusSwitchingProtocols": http.StatusSwitchingProtocols,"StatusMovedPermanently": http.StatusMovedPermanently,"StatusPermanentRedirect": http.StatusPermanentRedirect,"StatusPreconditionFailed": http.StatusPreconditionFailed,"StatusRequestEntityTooLarge": http.StatusRequestEntityTooLarge,"StatusTeapot": http.StatusTeapot,"StatusLoopDetected": http.StatusLoopDetected,"StatusFound": http.StatusFound,"StatusUnauthorized": http.StatusUnauthorized,"StatusPreconditionRequired": http.StatusPreconditionRequired,"StatusForbidden": http.StatusForbidden,"StatusTooManyRequests": http.StatusTooManyRequests,"StatusRequestHeaderFieldsTooLarge": http.StatusRequestHeaderFieldsTooLarge,"StatusText": http.StatusText,"StatusProxyAuthRequired": http.StatusProxyAuthRequired,"StatusNotImplemented": http.StatusNotImplemented,"StatusBadGateway": http.StatusBadGateway,"StatusNotExtended": http.StatusNotExtended,"StatusSeeOther": http.StatusSeeOther,"StatusTemporaryRedirect": http.StatusTemporaryRedirect,"StatusUnprocessableEntity": http.StatusUnprocessableEntity,"StatusNonAuthoritativeInfo": http.StatusNonAuthoritativeInfo,"StatusIMUsed": http.StatusIMUsed,"StatusBadRequest": http.StatusBadRequest,"StatusNotFound": http.StatusNotFound,"StatusMultiStatus": http.StatusMultiStatus,"StatusRequestTimeout": http.StatusRequestTimeout,"StatusRequestURITooLong": http.StatusRequestURITooLong,"StatusCreated": http.StatusCreated,"StatusMultipleChoices": http.StatusMultipleChoices,"StatusMethodNotAllowed": http.StatusMethodNotAllowed,"StatusLocked": http.StatusLocked,"StatusHTTPVersionNotSupported": http.StatusHTTPVersionNotSupported,"StatusNetworkAuthenticationRequired": http.StatusNetworkAuthenticationRequired,"StatusNoContent": http.StatusNoContent,"StatusUseProxy": http.StatusUseProxy,"StatusUnsupportedMediaType": http.StatusUnsupportedMediaType,"StatusUpgradeRequired": http.StatusUpgradeRequired,"StatusGatewayTimeout": http.StatusGatewayTimeout,"StatusContinue": http.StatusContinue,"StatusResetContent": http.StatusResetContent,"StatusNotAcceptable": http.StatusNotAcceptable,"StatusExpectationFailed": http.StatusExpectationFailed,"StatusAccepted": http.StatusAccepted,"StatusAlreadyReported": http.StatusAlreadyReported,"StatusGone": http.StatusGone,"StatusLengthRequired": http.StatusLengthRequired,"StatusPaymentRequired": http.StatusPaymentRequired,"StatusRequestedRangeNotSatisfiable": http.StatusRequestedRangeNotSatisfiable,"StatusMisdirectedRequest": http.StatusMisdirectedRequest,"StatusVariantAlsoNegotiates": http.StatusVariantAlsoNegotiates,"ErrUseLastResponse": http.ErrUseLastResponse,"PostForm": http.PostForm,"Client": pry.Type(http.Client{}),"DefaultClient": http.DefaultClient,"Head": http.Head,"Get": http.Get,"Post": http.Post,"Response": pry.Type(http.Response{}),"ErrNoLocation": http.ErrNoLocation,"ReadResponse": http.ReadResponse,"NewFileTransport": http.NewFileTransport,}}, "pry": pry.Package{Name: "pry", Functions: map[string]interface{}{"Pry": pry.Pry,"Apply": pry.Apply,"NewScope": pry.NewScope,"Func": pry.Type(pry.Func{}),"ValuesToInterfaces": pry.ValuesToInterfaces,"ErrChanSendFailed": pry.ErrChanSendFailed,"ErrBranchContinue": pry.ErrBranchContinue,"Scope": pry.Type(pry.Scope{}),"Defer": pry.Type(pry.Defer{}),"ErrBranchBreak": pry.ErrBranchBreak,"StringToType": pry.StringToType,"ErrChanRecvFailed": pry.ErrChanRecvFailed,"ErrChanRecvInSelect": pry.ErrChanRecvInSelect,"ErrDivisionByZero": pry.ErrDivisionByZero,"DeAssign": pry.DeAssign,"ComputeBinaryOp": pry.ComputeBinaryOp,"Package": pry.Type(pry.Package{}),"Type": pry.Type,"Highlight": pry.Highlight,"JSImporter": pry.Type(pry.JSImporter{}),"InterpretError": pry.Type(pry.InterpretError{}),"Append": pry.Append,"Make": pry.Make,"Close": pry.Close,"Len": pry.Len,"Fuzz": pry.Fuzz,}}, }})
		fmt.Fprintf(w, "Hello, %q", html.EscapeString(r.URL.Path))

		_ = b
	})

	pry.Apply(&pry.Scope{Vals:map[string]interface{}{ "main": main, "w": w, "fmt": pry.Package{Name: "fmt", Functions: map[string]interface{}{"Printf": fmt.Printf,"Fprintln": fmt.Fprintln,"Sprint": fmt.Sprint,"Fprint": fmt.Fprint,"Fprintf": fmt.Fprintf,"Errorf": fmt.Errorf,"Sprintln": fmt.Sprintln,"Println": fmt.Println,"Print": fmt.Print,"Sprintf": fmt.Sprintf,"Sscanln": fmt.Sscanln,"Sscan": fmt.Sscan,"Fscanln": fmt.Fscanln,"Scanln": fmt.Scanln,"Fscan": fmt.Fscan,"Scan": fmt.Scan,"Sscanf": fmt.Sscanf,"Scanf": fmt.Scanf,"Fscanf": fmt.Fscanf,}}, "html": pry.Package{Name: "html", Functions: map[string]interface{}{"EscapeString": html.EscapeString,"UnescapeString": html.UnescapeString,}}, "log": pry.Package{Name: "log", Functions: map[string]interface{}{"Fatal": log.Fatal,"Panic": log.Panic,"Panicf": log.Panicf,"Ltime": log.Ltime,"Llongfile": log.Llongfile,"New": log.New,"SetOutput": log.SetOutput,"SetPrefix": log.SetPrefix,"Fatalln": log.Fatalln,"Output": log.Output,"Ldate": log.Ldate,"LUTC": log.LUTC,"LstdFlags": log.LstdFlags,"Flags": log.Flags,"SetFlags": log.SetFlags,"Printf": log.Printf,"Fatalf": log.Fatalf,"Println": log.Println,"Panicln": log.Panicln,"Lmicroseconds": log.Lmicroseconds,"Lshortfile": log.Lshortfile,"Logger": pry.Type(log.Logger{}),"Prefix": log.Prefix,"Print": log.Print,}}, "http": pry.Package{Name: "http", Functions: map[string]interface{}{"PushOptions": pry.Type(http.PushOptions{}),"NoBody": http.NoBody,"ErrBodyReadAfterClose": http.ErrBodyReadAfterClose,"ErrLineTooLong": http.ErrLineTooLong,"DetectContentType": http.DetectContentType,"ProxyFromEnvironment": http.ProxyFromEnvironment,"Transport": pry.Type(http.Transport{}),"ErrSkipAltProtocol": http.ErrSkipAltProtocol,"DefaultTransport": http.DefaultTransport,"DefaultMaxIdleConnsPerHost": http.DefaultMaxIdleConnsPerHost,"ProxyURL": http.ProxyURL,"ParseTime": http.ParseTime,"CanonicalHeaderKey": http.CanonicalHeaderKey,"Header": pry.Type(http.Header(map[string][]string(nil))),"ErrMissingBoundary": http.ErrMissingBoundary,"ErrMissingFile": http.ErrMissingFile,"ErrUnexpectedTrailer": http.ErrUnexpectedTrailer,"ErrNoCookie": http.ErrNoCookie,"NewRequest": http.NewRequest,"ErrHeaderTooLong": http.ErrHeaderTooLong,"ErrMissingContentLength": http.ErrMissingContentLength,"MaxBytesReader": http.MaxBytesReader,"ProtocolError": pry.Type(http.ProtocolError{}),"ErrNotSupported": http.ErrNotSupported,"ParseHTTPVersion": http.ParseHTTPVersion,"ErrNotMultipart": http.ErrNotMultipart,"ErrShortBody": http.ErrShortBody,"Request": pry.Type(http.Request{}),"ReadRequest": http.ReadRequest,"ServeContent": http.ServeContent,"FileServer": http.FileServer,"ServeFile": http.ServeFile,"Dir": pry.Type(http.Dir("")),"SameSiteDefaultMode": http.SameSiteDefaultMode,"SameSiteStrictMode": http.SameSiteStrictMode,"SetCookie": http.SetCookie,"SameSiteLaxMode": http.SameSiteLaxMode,"Cookie": pry.Type(http.Cookie{}),"SameSite": pry.Type(http.SameSite(0)),"StateHijacked": http.StateHijacked,"NewServeMux": http.NewServeMux,"ServerContextKey": http.ServerContextKey,"NotFoundHandler": http.NotFoundHandler,"HandleFunc": http.HandleFunc,"Server": pry.Type(http.Server{}),"RedirectHandler": http.RedirectHandler,"NotFound": http.NotFound,"DefaultServeMux": http.DefaultServeMux,"ErrServerClosed": http.ErrServerClosed,"Serve": http.Serve,"StateNew": http.StateNew,"ErrHandlerTimeout": http.ErrHandlerTimeout,"Redirect": http.Redirect,"ErrBodyNotAllowed": http.ErrBodyNotAllowed,"TimeoutHandler": http.TimeoutHandler,"ListenAndServe": http.ListenAndServe,"ErrContentLength": http.ErrContentLength,"StateClosed": http.StateClosed,"ErrWriteAfterFlush": http.ErrWriteAfterFlush,"Error": http.Error,"ErrHijacked": http.ErrHijacked,"StateIdle": http.StateIdle,"TrailerPrefix": http.TrailerPrefix,"Handle": http.Handle,"ErrAbortHandler": http.ErrAbortHandler,"StripPrefix": http.StripPrefix,"StateActive": http.StateActive,"ListenAndServeTLS": http.ListenAndServeTLS,"LocalAddrContextKey": http.LocalAddrContextKey,"TimeFormat": http.TimeFormat,"ServeTLS": http.ServeTLS,"ConnState": pry.Type(http.ConnState(0)),"ServeMux": pry.Type(http.ServeMux{}),"DefaultMaxHeaderBytes": http.DefaultMaxHeaderBytes,"MethodPost": http.MethodPost,"MethodPut": http.MethodPut,"MethodPatch": http.MethodPatch,"MethodDelete": http.MethodDelete,"MethodOptions": http.MethodOptions,"MethodGet": http.MethodGet,"MethodHead": http.MethodHead,"MethodConnect": http.MethodConnect,"MethodTrace": http.MethodTrace,"StatusNotModified": http.StatusNotModified,"StatusConflict": http.StatusConflict,"StatusInsufficientStorage": http.StatusInsufficientStorage,"StatusFailedDependency": http.StatusFailedDependency,"StatusServiceUnavailable": http.StatusServiceUnavailable,"StatusProcessing": http.StatusProcessing,"StatusOK": http.StatusOK,"StatusPartialContent": http.StatusPartialContent,"StatusUnavailableForLegalReasons": http.StatusUnavailableForLegalReasons,"StatusInternalServerError": http.StatusInternalServerError,"StatusSwitchingProtocols": http.StatusSwitchingProtocols,"StatusMovedPermanently": http.StatusMovedPermanently,"StatusPermanentRedirect": http.StatusPermanentRedirect,"StatusPreconditionFailed": http.StatusPreconditionFailed,"StatusRequestEntityTooLarge": http.StatusRequestEntityTooLarge,"StatusTeapot": http.StatusTeapot,"StatusLoopDetected": http.StatusLoopDetected,"StatusFound": http.StatusFound,"StatusUnauthorized": http.StatusUnauthorized,"StatusPreconditionRequired": http.StatusPreconditionRequired,"StatusForbidden": http.StatusForbidden,"StatusTooManyRequests": http.StatusTooManyRequests,"StatusRequestHeaderFieldsTooLarge": http.StatusRequestHeaderFieldsTooLarge,"StatusText": http.StatusText,"StatusProxyAuthRequired": http.StatusProxyAuthRequired,"StatusNotImplemented": http.StatusNotImplemented,"StatusBadGateway": http.StatusBadGateway,"StatusNotExtended": http.StatusNotExtended,"StatusSeeOther": http.StatusSeeOther,"StatusTemporaryRedirect": http.StatusTemporaryRedirect,"StatusUnprocessableEntity": http.StatusUnprocessableEntity,"StatusNonAuthoritativeInfo": http.StatusNonAuthoritativeInfo,"StatusIMUsed": http.StatusIMUsed,"StatusBadRequest": http.StatusBadRequest,"StatusNotFound": http.StatusNotFound,"StatusMultiStatus": http.StatusMultiStatus,"StatusRequestTimeout": http.StatusRequestTimeout,"StatusRequestURITooLong": http.StatusRequestURITooLong,"StatusCreated": http.StatusCreated,"StatusMultipleChoices": http.StatusMultipleChoices,"StatusMethodNotAllowed": http.StatusMethodNotAllowed,"StatusLocked": http.StatusLocked,"StatusHTTPVersionNotSupported": http.StatusHTTPVersionNotSupported,"StatusNetworkAuthenticationRequired": http.StatusNetworkAuthenticationRequired,"StatusNoContent": http.StatusNoContent,"StatusUseProxy": http.StatusUseProxy,"StatusUnsupportedMediaType": http.StatusUnsupportedMediaType,"StatusUpgradeRequired": http.StatusUpgradeRequired,"StatusGatewayTimeout": http.StatusGatewayTimeout,"StatusContinue": http.StatusContinue,"StatusResetContent": http.StatusResetContent,"StatusNotAcceptable": http.StatusNotAcceptable,"StatusExpectationFailed": http.StatusExpectationFailed,"StatusAccepted": http.StatusAccepted,"StatusAlreadyReported": http.StatusAlreadyReported,"StatusGone": http.StatusGone,"StatusLengthRequired": http.StatusLengthRequired,"StatusPaymentRequired": http.StatusPaymentRequired,"StatusRequestedRangeNotSatisfiable": http.StatusRequestedRangeNotSatisfiable,"StatusMisdirectedRequest": http.StatusMisdirectedRequest,"StatusVariantAlsoNegotiates": http.StatusVariantAlsoNegotiates,"ErrUseLastResponse": http.ErrUseLastResponse,"PostForm": http.PostForm,"Client": pry.Type(http.Client{}),"DefaultClient": http.DefaultClient,"Head": http.Head,"Get": http.Get,"Post": http.Post,"Response": pry.Type(http.Response{}),"ErrNoLocation": http.ErrNoLocation,"ReadResponse": http.ReadResponse,"NewFileTransport": http.NewFileTransport,}}, "pry": pry.Package{Name: "pry", Functions: map[string]interface{}{"Pry": pry.Pry,"Apply": pry.Apply,"NewScope": pry.NewScope,"Func": pry.Type(pry.Func{}),"ValuesToInterfaces": pry.ValuesToInterfaces,"ErrChanSendFailed": pry.ErrChanSendFailed,"ErrBranchContinue": pry.ErrBranchContinue,"Scope": pry.Type(pry.Scope{}),"Defer": pry.Type(pry.Defer{}),"ErrBranchBreak": pry.ErrBranchBreak,"StringToType": pry.StringToType,"ErrChanRecvFailed": pry.ErrChanRecvFailed,"ErrChanRecvInSelect": pry.ErrChanRecvInSelect,"ErrDivisionByZero": pry.ErrDivisionByZero,"DeAssign": pry.DeAssign,"ComputeBinaryOp": pry.ComputeBinaryOp,"Package": pry.Type(pry.Package{}),"Type": pry.Type,"Highlight": pry.Highlight,"JSImporter": pry.Type(pry.JSImporter{}),"InterpretError": pry.Type(pry.InterpretError{}),"Append": pry.Append,"Make": pry.Make,"Close": pry.Close,"Len": pry.Len,"Fuzz": pry.Fuzz,}}, }})

	log.Fatal(http.ListenAndServe(":9090", nil))
	_ = w
}
