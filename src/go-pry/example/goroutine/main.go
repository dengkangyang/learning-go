package main

import (
	"fmt"
	"html"
	"log"
	"net/http"

	"github.com/d4l3k/go-pry/pry"
)

func main() {
	w := 6
	http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
		b := "toast"
		pry.Apply(&pry.Scope{Vals:map[string]interface{}{ "main": main, "w": w, "r": r, "b": b, "fmt": pry.Package{Name: "fmt", Functions: map[string]interface{}{"Print": fmt.Print,"Fprintln": fmt.Fprintln,"Fprint": fmt.Fprint,"Fprintf": fmt.Fprintf,"Println": fmt.Println,"Printf": fmt.Printf,"Sprintln": fmt.Sprintln,"Errorf": fmt.Errorf,"Sprint": fmt.Sprint,"Sprintf": fmt.Sprintf,"Scan": fmt.Scan,"Sscanln": fmt.Sscanln,"Sscan": fmt.Sscan,"Fscanf": fmt.Fscanf,"Scanln": fmt.Scanln,"Scanf": fmt.Scanf,"Fscan": fmt.Fscan,"Sscanf": fmt.Sscanf,"Fscanln": fmt.Fscanln,}}, "html": pry.Package{Name: "html", Functions: map[string]interface{}{"EscapeString": html.EscapeString,"UnescapeString": html.UnescapeString,}}, "log": pry.Package{Name: "log", Functions: map[string]interface{}{"Output": log.Output,"LUTC": log.LUTC,"Flags": log.Flags,"Fatalf": log.Fatalf,"Panicf": log.Panicf,"Logger": pry.Type(log.Logger{}),"SetOutput": log.SetOutput,"Ldate": log.Ldate,"Lmicroseconds": log.Lmicroseconds,"Llongfile": log.Llongfile,"Lshortfile": log.Lshortfile,"LstdFlags": log.LstdFlags,"Printf": log.Printf,"Fatal": log.Fatal,"Fatalln": log.Fatalln,"SetFlags": log.SetFlags,"Print": log.Print,"Panic": log.Panic,"Panicln": log.Panicln,"Ltime": log.Ltime,"New": log.New,"Prefix": log.Prefix,"SetPrefix": log.SetPrefix,"Println": log.Println,}}, "http": pry.Package{Name: "http", Functions: map[string]interface{}{"FileServer": http.FileServer,"Dir": pry.Type(http.Dir("")),"ServeFile": http.ServeFile,"ServeContent": http.ServeContent,"NewFileTransport": http.NewFileTransport,"NoBody": http.NoBody,"PushOptions": pry.Type(http.PushOptions{}),"ErrLineTooLong": http.ErrLineTooLong,"ErrBodyReadAfterClose": http.ErrBodyReadAfterClose,"ErrHijacked": http.ErrHijacked,"RedirectHandler": http.RedirectHandler,"ServerContextKey": http.ServerContextKey,"DefaultMaxHeaderBytes": http.DefaultMaxHeaderBytes,"ListenAndServeTLS": http.ListenAndServeTLS,"Server": pry.Type(http.Server{}),"Error": http.Error,"HandleFunc": http.HandleFunc,"ConnState": pry.Type(http.ConnState(0)),"NewServeMux": http.NewServeMux,"ErrBodyNotAllowed": http.ErrBodyNotAllowed,"StateHijacked": http.StateHijacked,"TrailerPrefix": http.TrailerPrefix,"NotFound": http.NotFound,"StateNew": http.StateNew,"Serve": http.Serve,"ErrServerClosed": http.ErrServerClosed,"ServeMux": pry.Type(http.ServeMux{}),"TimeFormat": http.TimeFormat,"ListenAndServe": http.ListenAndServe,"Handle": http.Handle,"ErrHandlerTimeout": http.ErrHandlerTimeout,"DefaultServeMux": http.DefaultServeMux,"TimeoutHandler": http.TimeoutHandler,"NotFoundHandler": http.NotFoundHandler,"ServeTLS": http.ServeTLS,"StripPrefix": http.StripPrefix,"StateActive": http.StateActive,"StateIdle": http.StateIdle,"ErrContentLength": http.ErrContentLength,"LocalAddrContextKey": http.LocalAddrContextKey,"ErrAbortHandler": http.ErrAbortHandler,"ErrWriteAfterFlush": http.ErrWriteAfterFlush,"Redirect": http.Redirect,"StateClosed": http.StateClosed,"Header": pry.Type(http.Header(map[string][]string(nil))),"ParseTime": http.ParseTime,"CanonicalHeaderKey": http.CanonicalHeaderKey,"Response": pry.Type(http.Response{}),"ErrNoLocation": http.ErrNoLocation,"ReadResponse": http.ReadResponse,"MethodGet": http.MethodGet,"MethodHead": http.MethodHead,"MethodPost": http.MethodPost,"MethodPatch": http.MethodPatch,"MethodOptions": http.MethodOptions,"MethodTrace": http.MethodTrace,"MethodPut": http.MethodPut,"MethodDelete": http.MethodDelete,"MethodConnect": http.MethodConnect,"Client": pry.Type(http.Client{}),"Get": http.Get,"ErrUseLastResponse": http.ErrUseLastResponse,"Post": http.Post,"PostForm": http.PostForm,"DefaultClient": http.DefaultClient,"Head": http.Head,"StatusUnsupportedMediaType": http.StatusUnsupportedMediaType,"StatusNotExtended": http.StatusNotExtended,"StatusMovedPermanently": http.StatusMovedPermanently,"StatusMethodNotAllowed": http.StatusMethodNotAllowed,"StatusPreconditionRequired": http.StatusPreconditionRequired,"StatusNoContent": http.StatusNoContent,"StatusGone": http.StatusGone,"StatusPreconditionFailed": http.StatusPreconditionFailed,"StatusNetworkAuthenticationRequired": http.StatusNetworkAuthenticationRequired,"StatusNotAcceptable": http.StatusNotAcceptable,"StatusServiceUnavailable": http.StatusServiceUnavailable,"StatusTemporaryRedirect": http.StatusTemporaryRedirect,"StatusSwitchingProtocols": http.StatusSwitchingProtocols,"StatusProcessing": http.StatusProcessing,"StatusOK": http.StatusOK,"StatusMultiStatus": http.StatusMultiStatus,"StatusSeeOther": http.StatusSeeOther,"StatusResetContent": http.StatusResetContent,"StatusNotFound": http.StatusNotFound,"StatusProxyAuthRequired": http.StatusProxyAuthRequired,"StatusInsufficientStorage": http.StatusInsufficientStorage,"StatusLoopDetected": http.StatusLoopDetected,"StatusMultipleChoices": http.StatusMultipleChoices,"StatusFound": http.StatusFound,"StatusConflict": http.StatusConflict,"StatusNotImplemented": http.StatusNotImplemented,"StatusBadGateway": http.StatusBadGateway,"StatusCreated": http.StatusCreated,"StatusPaymentRequired": http.StatusPaymentRequired,"StatusLocked": http.StatusLocked,"StatusRequestHeaderFieldsTooLarge": http.StatusRequestHeaderFieldsTooLarge,"StatusHTTPVersionNotSupported": http.StatusHTTPVersionNotSupported,"StatusGatewayTimeout": http.StatusGatewayTimeout,"StatusVariantAlsoNegotiates": http.StatusVariantAlsoNegotiates,"StatusIMUsed": http.StatusIMUsed,"StatusPermanentRedirect": http.StatusPermanentRedirect,"StatusRequestEntityTooLarge": http.StatusRequestEntityTooLarge,"StatusFailedDependency": http.StatusFailedDependency,"StatusUnavailableForLegalReasons": http.StatusUnavailableForLegalReasons,"StatusLengthRequired": http.StatusLengthRequired,"StatusRequestURITooLong": http.StatusRequestURITooLong,"StatusUpgradeRequired": http.StatusUpgradeRequired,"StatusInternalServerError": http.StatusInternalServerError,"StatusPartialContent": http.StatusPartialContent,"StatusNotModified": http.StatusNotModified,"StatusExpectationFailed": http.StatusExpectationFailed,"StatusContinue": http.StatusContinue,"StatusAlreadyReported": http.StatusAlreadyReported,"StatusMisdirectedRequest": http.StatusMisdirectedRequest,"StatusUseProxy": http.StatusUseProxy,"StatusUnauthorized": http.StatusUnauthorized,"StatusNonAuthoritativeInfo": http.StatusNonAuthoritativeInfo,"StatusRequestTimeout": http.StatusRequestTimeout,"StatusText": http.StatusText,"StatusBadRequest": http.StatusBadRequest,"StatusRequestedRangeNotSatisfiable": http.StatusRequestedRangeNotSatisfiable,"StatusTeapot": http.StatusTeapot,"StatusTooManyRequests": http.StatusTooManyRequests,"StatusAccepted": http.StatusAccepted,"StatusForbidden": http.StatusForbidden,"StatusUnprocessableEntity": http.StatusUnprocessableEntity,"DefaultMaxIdleConnsPerHost": http.DefaultMaxIdleConnsPerHost,"DefaultTransport": http.DefaultTransport,"ProxyURL": http.ProxyURL,"ProxyFromEnvironment": http.ProxyFromEnvironment,"ErrSkipAltProtocol": http.ErrSkipAltProtocol,"Transport": pry.Type(http.Transport{}),"SetCookie": http.SetCookie,"SameSiteLaxMode": http.SameSiteLaxMode,"SameSite": pry.Type(http.SameSite(0)),"SameSiteDefaultMode": http.SameSiteDefaultMode,"Cookie": pry.Type(http.Cookie{}),"SameSiteStrictMode": http.SameSiteStrictMode,"DetectContentType": http.DetectContentType,"ErrMissingBoundary": http.ErrMissingBoundary,"ReadRequest": http.ReadRequest,"ErrNotSupported": http.ErrNotSupported,"ErrHeaderTooLong": http.ErrHeaderTooLong,"ErrShortBody": http.ErrShortBody,"ErrNoCookie": http.ErrNoCookie,"ParseHTTPVersion": http.ParseHTTPVersion,"NewRequest": http.NewRequest,"ErrMissingFile": http.ErrMissingFile,"ProtocolError": pry.Type(http.ProtocolError{}),"ErrUnexpectedTrailer": http.ErrUnexpectedTrailer,"ErrMissingContentLength": http.ErrMissingContentLength,"Request": pry.Type(http.Request{}),"MaxBytesReader": http.MaxBytesReader,"ErrNotMultipart": http.ErrNotMultipart,}}, "pry": pry.Package{Name: "pry", Functions: map[string]interface{}{"JSImporter": pry.Type(pry.JSImporter{}),"Package": pry.Type(pry.Package{}),"ErrBranchBreak": pry.ErrBranchBreak,"Scope": pry.Type(pry.Scope{}),"Func": pry.Type(pry.Func{}),"ValuesToInterfaces": pry.ValuesToInterfaces,"ErrChanSendFailed": pry.ErrChanSendFailed,"ErrBranchContinue": pry.ErrBranchContinue,"Defer": pry.Type(pry.Defer{}),"NewScope": pry.NewScope,"StringToType": pry.StringToType,"Len": pry.Len,"InterpretError": pry.Type(pry.InterpretError{}),"Append": pry.Append,"Make": pry.Make,"Close": pry.Close,"ComputeBinaryOp": pry.ComputeBinaryOp,"ErrChanRecvFailed": pry.ErrChanRecvFailed,"ErrChanRecvInSelect": pry.ErrChanRecvInSelect,"ErrDivisionByZero": pry.ErrDivisionByZero,"DeAssign": pry.DeAssign,"Pry": pry.Pry,"Apply": pry.Apply,"Type": pry.Type,"Highlight": pry.Highlight,"Fuzz": pry.Fuzz,}}, }})
		fmt.Fprintf(w, "Hello, %q", html.EscapeString(r.URL.Path))

		_ = b
	})

	pry.Apply(&pry.Scope{Vals:map[string]interface{}{ "main": main, "w": w, "fmt": pry.Package{Name: "fmt", Functions: map[string]interface{}{"Print": fmt.Print,"Fprintln": fmt.Fprintln,"Fprint": fmt.Fprint,"Fprintf": fmt.Fprintf,"Println": fmt.Println,"Printf": fmt.Printf,"Sprintln": fmt.Sprintln,"Errorf": fmt.Errorf,"Sprint": fmt.Sprint,"Sprintf": fmt.Sprintf,"Scan": fmt.Scan,"Sscanln": fmt.Sscanln,"Sscan": fmt.Sscan,"Fscanf": fmt.Fscanf,"Scanln": fmt.Scanln,"Scanf": fmt.Scanf,"Fscan": fmt.Fscan,"Sscanf": fmt.Sscanf,"Fscanln": fmt.Fscanln,}}, "html": pry.Package{Name: "html", Functions: map[string]interface{}{"EscapeString": html.EscapeString,"UnescapeString": html.UnescapeString,}}, "log": pry.Package{Name: "log", Functions: map[string]interface{}{"Output": log.Output,"LUTC": log.LUTC,"Flags": log.Flags,"Fatalf": log.Fatalf,"Panicf": log.Panicf,"Logger": pry.Type(log.Logger{}),"SetOutput": log.SetOutput,"Ldate": log.Ldate,"Lmicroseconds": log.Lmicroseconds,"Llongfile": log.Llongfile,"Lshortfile": log.Lshortfile,"LstdFlags": log.LstdFlags,"Printf": log.Printf,"Fatal": log.Fatal,"Fatalln": log.Fatalln,"SetFlags": log.SetFlags,"Print": log.Print,"Panic": log.Panic,"Panicln": log.Panicln,"Ltime": log.Ltime,"New": log.New,"Prefix": log.Prefix,"SetPrefix": log.SetPrefix,"Println": log.Println,}}, "http": pry.Package{Name: "http", Functions: map[string]interface{}{"FileServer": http.FileServer,"Dir": pry.Type(http.Dir("")),"ServeFile": http.ServeFile,"ServeContent": http.ServeContent,"NewFileTransport": http.NewFileTransport,"NoBody": http.NoBody,"PushOptions": pry.Type(http.PushOptions{}),"ErrLineTooLong": http.ErrLineTooLong,"ErrBodyReadAfterClose": http.ErrBodyReadAfterClose,"ErrHijacked": http.ErrHijacked,"RedirectHandler": http.RedirectHandler,"ServerContextKey": http.ServerContextKey,"DefaultMaxHeaderBytes": http.DefaultMaxHeaderBytes,"ListenAndServeTLS": http.ListenAndServeTLS,"Server": pry.Type(http.Server{}),"Error": http.Error,"HandleFunc": http.HandleFunc,"ConnState": pry.Type(http.ConnState(0)),"NewServeMux": http.NewServeMux,"ErrBodyNotAllowed": http.ErrBodyNotAllowed,"StateHijacked": http.StateHijacked,"TrailerPrefix": http.TrailerPrefix,"NotFound": http.NotFound,"StateNew": http.StateNew,"Serve": http.Serve,"ErrServerClosed": http.ErrServerClosed,"ServeMux": pry.Type(http.ServeMux{}),"TimeFormat": http.TimeFormat,"ListenAndServe": http.ListenAndServe,"Handle": http.Handle,"ErrHandlerTimeout": http.ErrHandlerTimeout,"DefaultServeMux": http.DefaultServeMux,"TimeoutHandler": http.TimeoutHandler,"NotFoundHandler": http.NotFoundHandler,"ServeTLS": http.ServeTLS,"StripPrefix": http.StripPrefix,"StateActive": http.StateActive,"StateIdle": http.StateIdle,"ErrContentLength": http.ErrContentLength,"LocalAddrContextKey": http.LocalAddrContextKey,"ErrAbortHandler": http.ErrAbortHandler,"ErrWriteAfterFlush": http.ErrWriteAfterFlush,"Redirect": http.Redirect,"StateClosed": http.StateClosed,"Header": pry.Type(http.Header(map[string][]string(nil))),"ParseTime": http.ParseTime,"CanonicalHeaderKey": http.CanonicalHeaderKey,"Response": pry.Type(http.Response{}),"ErrNoLocation": http.ErrNoLocation,"ReadResponse": http.ReadResponse,"MethodGet": http.MethodGet,"MethodHead": http.MethodHead,"MethodPost": http.MethodPost,"MethodPatch": http.MethodPatch,"MethodOptions": http.MethodOptions,"MethodTrace": http.MethodTrace,"MethodPut": http.MethodPut,"MethodDelete": http.MethodDelete,"MethodConnect": http.MethodConnect,"Client": pry.Type(http.Client{}),"Get": http.Get,"ErrUseLastResponse": http.ErrUseLastResponse,"Post": http.Post,"PostForm": http.PostForm,"DefaultClient": http.DefaultClient,"Head": http.Head,"StatusUnsupportedMediaType": http.StatusUnsupportedMediaType,"StatusNotExtended": http.StatusNotExtended,"StatusMovedPermanently": http.StatusMovedPermanently,"StatusMethodNotAllowed": http.StatusMethodNotAllowed,"StatusPreconditionRequired": http.StatusPreconditionRequired,"StatusNoContent": http.StatusNoContent,"StatusGone": http.StatusGone,"StatusPreconditionFailed": http.StatusPreconditionFailed,"StatusNetworkAuthenticationRequired": http.StatusNetworkAuthenticationRequired,"StatusNotAcceptable": http.StatusNotAcceptable,"StatusServiceUnavailable": http.StatusServiceUnavailable,"StatusTemporaryRedirect": http.StatusTemporaryRedirect,"StatusSwitchingProtocols": http.StatusSwitchingProtocols,"StatusProcessing": http.StatusProcessing,"StatusOK": http.StatusOK,"StatusMultiStatus": http.StatusMultiStatus,"StatusSeeOther": http.StatusSeeOther,"StatusResetContent": http.StatusResetContent,"StatusNotFound": http.StatusNotFound,"StatusProxyAuthRequired": http.StatusProxyAuthRequired,"StatusInsufficientStorage": http.StatusInsufficientStorage,"StatusLoopDetected": http.StatusLoopDetected,"StatusMultipleChoices": http.StatusMultipleChoices,"StatusFound": http.StatusFound,"StatusConflict": http.StatusConflict,"StatusNotImplemented": http.StatusNotImplemented,"StatusBadGateway": http.StatusBadGateway,"StatusCreated": http.StatusCreated,"StatusPaymentRequired": http.StatusPaymentRequired,"StatusLocked": http.StatusLocked,"StatusRequestHeaderFieldsTooLarge": http.StatusRequestHeaderFieldsTooLarge,"StatusHTTPVersionNotSupported": http.StatusHTTPVersionNotSupported,"StatusGatewayTimeout": http.StatusGatewayTimeout,"StatusVariantAlsoNegotiates": http.StatusVariantAlsoNegotiates,"StatusIMUsed": http.StatusIMUsed,"StatusPermanentRedirect": http.StatusPermanentRedirect,"StatusRequestEntityTooLarge": http.StatusRequestEntityTooLarge,"StatusFailedDependency": http.StatusFailedDependency,"StatusUnavailableForLegalReasons": http.StatusUnavailableForLegalReasons,"StatusLengthRequired": http.StatusLengthRequired,"StatusRequestURITooLong": http.StatusRequestURITooLong,"StatusUpgradeRequired": http.StatusUpgradeRequired,"StatusInternalServerError": http.StatusInternalServerError,"StatusPartialContent": http.StatusPartialContent,"StatusNotModified": http.StatusNotModified,"StatusExpectationFailed": http.StatusExpectationFailed,"StatusContinue": http.StatusContinue,"StatusAlreadyReported": http.StatusAlreadyReported,"StatusMisdirectedRequest": http.StatusMisdirectedRequest,"StatusUseProxy": http.StatusUseProxy,"StatusUnauthorized": http.StatusUnauthorized,"StatusNonAuthoritativeInfo": http.StatusNonAuthoritativeInfo,"StatusRequestTimeout": http.StatusRequestTimeout,"StatusText": http.StatusText,"StatusBadRequest": http.StatusBadRequest,"StatusRequestedRangeNotSatisfiable": http.StatusRequestedRangeNotSatisfiable,"StatusTeapot": http.StatusTeapot,"StatusTooManyRequests": http.StatusTooManyRequests,"StatusAccepted": http.StatusAccepted,"StatusForbidden": http.StatusForbidden,"StatusUnprocessableEntity": http.StatusUnprocessableEntity,"DefaultMaxIdleConnsPerHost": http.DefaultMaxIdleConnsPerHost,"DefaultTransport": http.DefaultTransport,"ProxyURL": http.ProxyURL,"ProxyFromEnvironment": http.ProxyFromEnvironment,"ErrSkipAltProtocol": http.ErrSkipAltProtocol,"Transport": pry.Type(http.Transport{}),"SetCookie": http.SetCookie,"SameSiteLaxMode": http.SameSiteLaxMode,"SameSite": pry.Type(http.SameSite(0)),"SameSiteDefaultMode": http.SameSiteDefaultMode,"Cookie": pry.Type(http.Cookie{}),"SameSiteStrictMode": http.SameSiteStrictMode,"DetectContentType": http.DetectContentType,"ErrMissingBoundary": http.ErrMissingBoundary,"ReadRequest": http.ReadRequest,"ErrNotSupported": http.ErrNotSupported,"ErrHeaderTooLong": http.ErrHeaderTooLong,"ErrShortBody": http.ErrShortBody,"ErrNoCookie": http.ErrNoCookie,"ParseHTTPVersion": http.ParseHTTPVersion,"NewRequest": http.NewRequest,"ErrMissingFile": http.ErrMissingFile,"ProtocolError": pry.Type(http.ProtocolError{}),"ErrUnexpectedTrailer": http.ErrUnexpectedTrailer,"ErrMissingContentLength": http.ErrMissingContentLength,"Request": pry.Type(http.Request{}),"MaxBytesReader": http.MaxBytesReader,"ErrNotMultipart": http.ErrNotMultipart,}}, "pry": pry.Package{Name: "pry", Functions: map[string]interface{}{"JSImporter": pry.Type(pry.JSImporter{}),"Package": pry.Type(pry.Package{}),"ErrBranchBreak": pry.ErrBranchBreak,"Scope": pry.Type(pry.Scope{}),"Func": pry.Type(pry.Func{}),"ValuesToInterfaces": pry.ValuesToInterfaces,"ErrChanSendFailed": pry.ErrChanSendFailed,"ErrBranchContinue": pry.ErrBranchContinue,"Defer": pry.Type(pry.Defer{}),"NewScope": pry.NewScope,"StringToType": pry.StringToType,"Len": pry.Len,"InterpretError": pry.Type(pry.InterpretError{}),"Append": pry.Append,"Make": pry.Make,"Close": pry.Close,"ComputeBinaryOp": pry.ComputeBinaryOp,"ErrChanRecvFailed": pry.ErrChanRecvFailed,"ErrChanRecvInSelect": pry.ErrChanRecvInSelect,"ErrDivisionByZero": pry.ErrDivisionByZero,"DeAssign": pry.DeAssign,"Pry": pry.Pry,"Apply": pry.Apply,"Type": pry.Type,"Highlight": pry.Highlight,"Fuzz": pry.Fuzz,}}, }})

	log.Fatal(http.ListenAndServe(":9090", nil))
	_ = w
}
